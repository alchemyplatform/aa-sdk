---
title: Set up client
description: Set up client
slug: wallets/concepts/smart-account-client
---

A client will be the main interface used to interact with smart wallets and take actions like sending transactions, batching transactions, swapping, sponsoring gas, and more.

## How It Works

The [`SmartAccountClient`](https://github.com/alchemyplatform/aa-sdk/blob/main/aa-sdk/core/src/account/smartContractAccount.ts#L102-L128) is a EIP-1193 compatible extension of `viem`'s [Client](https://viem.sh/docs/clients/custom#build-your-own-client) which allows you to interact with smart wallets.

The default smart account type is Modular Account V2 â€” the most cost-effective and advanced smart account option. You can specify other account types with additional [configuration](#TODO/advanced).

## Prerequisites

- [API key](https://dashboard.alchemy.com/apps)
- [Smart Wallets installed and configured in your project](/docs/wallets/pages/react/setup.mdx)
- (Optional)[A gas policy](https://dashboard.alchemy.com/gas-manager/policy/create)

## Implementation

<Tabs>
  <Tab title="React">
    <Info>
      [Set up your environment](/linktoauth) and authentication before using the client. React hooks only support Alchemy Signer. 
    </Info>
    The `useSmartAccountClient` hook will use the API key and policy ID settings passed to `createConfig`.
    ```tsx twoslash
    import React from "react";
    import { useSmartAccountClient } from "@account-kit/react";

    const { client } = useSmartAccountClient({});
    ```

  </Tab>
  <Tab title="React Native">
    <Info>
      React hooks only support Alchemy Signer. 
    </Info>
    The `useSmartAccountClient` hook will use the API key and policy ID settings passed to `createConfig`.

    ```tsx twoslash
    import React from "react";
    import { useSmartAccountClient } from "@account-kit/react";

    const { client } = useSmartAccountClient({});
    ```

  </Tab>
  <Tab title="Javascript">
  </Tab>
  <Tab title="API">
    See the [`wallet_prepareCalls` API
    reference](/docs/wallets/api/smart-wallets/wallet-api-endpoints/wallet-api-endpoints/wallet-prepare-calls)
    for full descriptions of the parameters used in the following examples.
    <Markdown src="api-postop.mdx" />
  </Tab>
</Tabs>

## Advanced

<Accordion title="More configuration options">
You can customize your client by specifying additional parameters to change account type, add gas sponsorship, etc. These parameters are optional.

**Account type**

By default, the Smart Account Client will use [ModularAccountV2](/wallets/smart-contracts/modular-account-v2/overview). This is the cheapest and most advanced Smart Account, but you can specify other smart contract account types as needed. Learn more about the different smart accounts [here](/wallets/smart-contracts/choosing-a-smart-account).

- **`type`** (string) - Defines the smart account type. Options:
  - `"ModularAccountV2"` (recommended and default)
  - `"LightAccount"`
  - `"MultiOwnerLightAccount"`
  - `"MultiOwnerModularAccount"`

<Tip>
  Note: Changing the account type will deploy a different account. If you've
  already deployed an account for a user and want to change the underlying
  account type, you'll need to upgrade it. Learn how to upgrade
  [here](/wallets/smart-contracts/other-accounts/modular-account/upgrading-to-modular-account).
</Tip>

**Using 7702**
To use EIP-7702, pass `"7702"`" to the `mode` in `accountParams`. This will delegate the connected EOA to a smart account. Read more [here](#TODO/link-to-7702).

**Advanced options**
| Usage | Parameter | Type |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Smart contract account implementation | `type` | One of `"ModularAccountV2"`, `"LightAccount"`, `"MultiOwnerLightAccount"`, `"MultiOwnerModularAccount"` |
| Sponsor gas for users. Get your policy ID [here](https://dashboard.alchemy.com/gas-manager) | `policyId` | `string` |
| Simulate user operations before sending (i.e. use [`alchemyUserOperationSimulator`](/wallets/reference/account-kit/infra/functions/alchemyUserOperationSimulator)) | `useSimulation` | `boolean` |
| Custom middleware to run before requesting sponsorship | `customMiddleware` | `ClientMiddlewareFn` |
| Override fee estimation middleware (if you are using our RPCs, it's important to use the default [`alchemyFeeEstimator`](/wallets/reference/account-kit/infra/functions/alchemyFeeEstimator)) | `feeEstimator` | `ClientMiddlewareFn` |
| Override gas estimation middleware (the default middleware calls the underlying bundler RPC to `eth_estimateUserOperationGas`) | `gasEstimator` | `ClientMiddlewareFn` |
| Override middleware that signs user operation(s) | `signUserOperation` | `ClientMiddlewareFn` |
| Advanced account params | `accountParams` | `AccountConfig` with the following fields: <ul><li>`mode`: `"default"` \| `"7702"`</li><li>`entryPoint`: `EntryPointDef`</li><li>`signerEntity`: `SignerEntity`</li><li>`salt`: `bigint`</li><li>`factoryAddress`: `Address`</li><li>`initCode`: `Hex`</li><li>`accountAddress`: `Address`</li></ul> |

</Accordion>
<Accordion title="Smart account client actions">
Because the Smart Account Clients are extensions of viem's clients, they support extensions via the `.extend` method. The base client already includes a [number of actions](https://github.com/alchemyplatform/aa-sdk/tree/v4.x.x/aa-sdk/core/src/actions/smartAccount) by default. You can find additional details about these actions in the [`@aa-sdk/core` documentation](/wallets/reference/aa-sdk/core).
</Accordion>
<Accordion title="Account agnostic client">
  Typically, the smart account client uses the default account or the account passed into the client constructor for all of the actions you perform with the client - also known as **account hositing**.
    
  If you want to manage multiple instances of an account but want to use one client for all of them, you can pass an account to the client on every action.

```ts
import {
  createAlchemySmartAccountClient,
  sepolia,
  alchemy,
} from "@account-kit/infra";
import { createLightAccount } from "@account-kit/smart-contracts";
import { LocalAccountSigner } from "@aa-sdk/core";
import { http } from "viem";
import { generatePrivateKey } from "viem/accounts";

// with account hoisting
const transport = alchemy({ apiKey: "your-api-key" });
const hoistedClient = createAlchemySmartAccountClient({
  transport,
  chain: sepolia,
  account: await createLightAccount({
    signer: LocalAccountSigner.privateKeyToAccountSigner(generatePrivateKey()),
    chain: sepolia,
    transport,
  }),
});

const signature = await hoistedClient.signMessage({ message: "Hello world! " });

// without account hoisting
const nonHoistedClient = createAlchemySmartAccountClient({
  transport,
  chain: sepolia,
});

const lightAccount = await createLightAccount({
  signer: LocalAccountSigner.privateKeyToAccountSigner(generatePrivateKey()),
  chain: sepolia,
  transport,
});

const signature2 = await nonHoistedClient.signMessage({
  message: "Hello world! ",
  account: lightAccount,
});
```

</Accordion>

## Next Steps

- [Send transactions](/wallets/transactions/send/evm-user-ops)
- [Sponsor gas](/wallets/transactions/sponsor-gas/sponsor-gas-evm)
- [Batch transactions](wallets/transactions/send/batch-user-ops)
