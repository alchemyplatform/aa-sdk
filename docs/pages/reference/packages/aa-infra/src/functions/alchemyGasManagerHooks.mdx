---
title: alchemyGasManagerHooks
description: Overview of the alchemyGasManagerHooks function
slug: wallets/reference/aa-infra/functions/alchemyGasManagerHooks
layout: reference
---

{/* This file is auto-generated by TypeDoc. Do not edit manually. */}

```ts
function alchemyGasManagerHooks(policyId, policyToken?): object;
```

Defined in: [packages/aa-infra/src/custom/alchemyGasManagerHooks.ts:170](https://github.com/alchemyplatform/aa-sdk/blob/fcb7fb5e0aa11593f6131b1b03318a95d60251de/packages/aa-infra/src/custom/alchemyGasManagerHooks.ts#L170)

Adapts Alchemy's Gas Manager to viem's paymaster interface using the optimized
`alchemy_requestGasAndPaymasterAndData` flow that combines gas estimation and
paymaster sponsorship in a single RPC call.

This implementation caches the result from the first call to avoid duplicate RPC calls
when viem calls both estimateFeesPerGas and paymaster functions.

Note: ERC-20 permits are not supported in these viem-native hooks. Permits require
building and signing the permit message before sending the user operation, which is
handled by middleware but not by these lower-level hooks. Use alchemyGasManagerMiddleware()
for permit support.

## Example

```ts
import { createBundlerClient } from "viem/account-abstraction";
import { alchemyGasManagerHooks } from "@alchemy/smart-accounts";

const bundler = createBundlerClient({
  transport: http("https://eth-sepolia.g.alchemy.com/v2/your-api-key"),
  chain: sepolia,
  account,
  ...alchemyGasManagerHooks("your-policy-id"),
});
```

## Parameters

<table>
  <thead>
    <tr>
      <th align="left">Parameter</th>
      <th align="left">Type</th>
      <th align="left">Description</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `policyId`
      </td>

      <td>
        `string` | `string`\[]
      </td>

      <td>
        The policy ID(s) for Alchemy's gas manager
      </td>
    </tr>

    <tr>
      <td>
        `policyToken?`
      </td>

      <td>
        [`PolicyToken`](../type-aliases/PolicyToken.mdx)
      </td>

      <td>
        Optional ERC-20 token configuration for paying gas with tokens
      </td>
    </tr>
  </tbody>
</table>

## Returns

`object`

Hooks for createBundlerClient

<table>
  <thead>
    <tr>
      <th align="left">Name</th>
      <th align="left">Type</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `paymaster()`
      </td>

      <td>
        (`client`) => `object`
      </td>
    </tr>

    <tr>
      <td>
        `userOperation`
      </td>

      <td>
        `object`
      </td>
    </tr>

    <tr>
      <td>
        `estimateFeesPerGas()`
      </td>

      <td>
        (`params`) => `Promise`\<\{
        `maxFeePerGas`: `bigint`;
        `maxPriorityFeePerGas`: `bigint`;
        }>
      </td>
    </tr>
  </tbody>
</table>
