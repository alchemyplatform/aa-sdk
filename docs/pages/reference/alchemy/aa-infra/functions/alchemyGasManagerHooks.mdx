---
# This file is autogenerated
title: alchemyGasManagerHooks
description: Overview of the alchemyGasManagerHooks method
slug: wallets/reference/alchemy/aa-infra/functions/alchemyGasManagerHooks
---

Adapts Alchemy's Gas Manager to viem's paymaster interface using the optimized
`alchemy_requestGasAndPaymasterAndData` flow that combines gas estimation and
paymaster sponsorship in a single RPC call.

This implementation caches the result from the first call to avoid duplicate RPC calls
when viem calls both estimateFeesPerGas and paymaster functions.

Note: ERC-20 permits are not supported in these viem-native hooks. Permits require
building and signing the permit message before sending the user operation, which is
handled by middleware but not by these lower-level hooks. Use alchemyGasManagerMiddleware()
for permit support.

## Import

```ts
import { alchemyGasManagerHooks } from "@alchemy/aa-infra";
```

## Usage

```ts
import { createBundlerClient } from "viem/account-abstraction";
import { alchemyGasManagerHooks } from "@alchemy/smart-accounts";

const bundler = createBundlerClient({
  transport: http("https://eth-sepolia.g.alchemy.com/v2/your-api-key"),
  chain: sepolia,
  account,
  ...alchemyGasManagerHooks("your-policy-id"),
});
```

## Parameters

### policyId

`string | string[]`

- The policy ID(s) for Alchemy's gas manager

### policyToken

`PolicyToken`

- Optional ERC-20 token configuration for paying gas with tokens

## Returns

`{ paymaster: Function, userOperation: { estimateFeesPerGas: Function } }`
Hooks for createBundlerClient
