---
title: "[NEW] On-chain Passkeys"
description: How to use on-chain passkeys to authenticate users and send user operations
slug: wallets/react/login-methods/onchain-passkeys
---

<Warning>**This feature is in early access.**</Warning>

The WebAuthn Modular Account enables password-less authentication on-chain using **passkeys** (via WebAuthn), and is compatible with [Alchemy’s Account Kit](/wallets). This guide demonstrates how to register credentials, authenticate users, and send user operations using the `@account-kit/smart-contracts` package.

Instead of on-device verification it's on-chain verification. Devs are responsible for generating the credentials attached to those biometric webauthn compatible passkeys and then using our signer.

## Prerequisites

- A frontend environment (React, Vite, Next.js, etc.)
- Browser with WebAuthn and Credential Management API support
- Install Alchemy Account Kit SDK smart contracts package (use the latest version - **at least 4.52.1**) and Viem

<CodeBlocks>

```bash yarn
  yarn add @account-kit/smart-contracts@4.52.1 @account-kit/infra@4.52.1 viem
```

```bash npm
  npm add @account-kit/smart-contracts@4.52.1 @account-kit/infra@4.52.1 viem
```

```bash pnpm
  pnpm add @account-kit/smart-contracts@4.52.1 @account-kit/infra@4.52.1 viem
```

</CodeBlocks>

## Example Workflow

1. User registers a WebAuthn credential
2. Credential ID and public key are stored locally
3. On login, `navigator.credentials.get()` fetches the credential
4. The app creates a client using the credential
5. A user operation is signed and sent

### Register WebAuthn Credential

<Warning>
  **You are responsible for retaining your users’ public keys**. Public keys
  generated by the WebAuthn specification are only retrievable **once** on the
  initial creation of the credential. As a precaution, we strongly suggest
  adding a secondary off-chain signer to use for account recovery
</Warning>

```tsx twoslash
import { createWebAuthnCredential } from "viem/account-abstraction";

const credential = await createWebAuthnCredential({
  name: "Credential Name",
});

// store credential id to public key mapping
// NOTE: use of localStorage is for TESTING PURPOSES ONLY, NOT FOR PRODUCTION USE
localStorage.setItem(credential.id, credential.publicKey); //credentialIdAsBase64Encoded -> publicKeyHex
```

### Login With Credential

```tsx twoslash
import { createModularAccountV2Client } from "@account-kit/smart-contracts";
import { alchemy, arbitrumSepolia } from "@account-kit/infra";

const publicKeyRequest: PublicKeyCredentialRequestOptions = {
  challenge: Uint8Array.fromHex("0x"), // Generate a random challenge
  rpId: "localhost", // should match your dApp domain
};

// retrieve available passkeys for the provided domain
const publicKeyCredential = await navigator.credentials.get({
  publicKeyRequest,
});

if (publicKeyCredential) {
  // verify that passkey with corresponding id exists on dApp
  const publicKeyHex = localStorage.getItem(publicKeyCredential.id);
  if (!publicKeyHex) throw new Error("Account does not exist");

  // create client to send transactions on behalf of verified user
  const accountClient = await createModularAccountV2Client({
    policyId: "YOUR_POLICY_ID",
    mode: "webauthn",
    credential: {
      id: publicKeyCredential.id,
      publicKey: publicKeyHex,
    },
    rpId: "localhost",
    chain: arbitrumSepolia,
    transport: alchemy({ apiKey: "YOUR_ALCHEMY_API_KEY" }),
  });
}
```

<Accordion title="`createModularAccountV2Client` Parameters">

| Parameter    | Type         | Description                                         |
| ------------ | ------------ | --------------------------------------------------- |
| `policyId`   | `string`     | Your account policy UUID from the Alchemy dashboard |
| `mode`       | `"webauthn"` | Specifies credential mode                           |
| `credential` | `object`     | `{ id: string, publicKey: Address }`                |
| `rpId`       | `string`     | Relying Party ID (e.g., `localhost` or your domain) |
| `chain`      | `Chain`      | Network config (e.g., `arbitrumSepolia`)            |
| `transport`  | `Transport`  | Alchemy or custom RPC transport                     |

</Accordion>

### Send User Operation

```tsx
const operation = await accountClient.sendUserOperation({
  uo: {
    target: "0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045", // Example: Vitalik's address
    data: "0x", // No calldata
    value: parseEther("0"),
  },
});
```

## React Native Integration

Get your React Native environment set up by following these [docs](/wallets/react-native/overview). Once you’ve completed this setup, you can use the webauthn signer as detailed above!

## What's Next

This is only the initial SDK release for on-chain passkeys. We are actively working on the DevX so your feedback will be greatly appreciated. If you have any questions or are interested in learning more, please reach out!
