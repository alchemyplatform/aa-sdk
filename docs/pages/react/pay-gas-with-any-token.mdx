---
title: Pay gas with any token
description: Enable your users to pay gas with ERC-20 tokens like USDC via Gas Manager
slug: wallets/react/pay-gas-with-any-token
---

Gas fees paid in the native gas token can feel foreign to users that primarily hold stablecoins or your app's own token. With our smart wallet, you can enable your users to pay for gas with ERC-20 tokens beyond the native gas token, like USDC or your own custom tokens, streamlining the user experience.

<Markdown src="../../shared/sponsor-gas-erc20-how-it-works.mdx" />

## Prerequisites

<Markdown src="../../shared/sponsor-gas-erc20-prerequisites.mdx" />

## 1. Create a Gas Manager policy

<Markdown src="../../shared/sponsor-gas-erc20-create-policy.mdx" />

<Tabs>
  <Tab title="React">
    ## 2. Add the policy to your global config

    ```ts twoslash config.ts
    import { createConfig } from "@account-kit/react";
    import { sepolia } from "@account-kit/infra";

    export const config = createConfig({
      apiKey: "ALCHEMY_API_KEY",
      chain: sepolia,
      policyId: "GAS_MANAGER_POLICY_ID", // your policy
      policyToken: {
        address: "0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238", // USDC_ADDRESS on sepolia (can be any ERC-20 token address enabled in your policy)
        maxTokenAmount: 10_000_000n, // Safety limit. If using USDC, this is 10 USDC (10 * 10^6).
      },
    });
    ```

    All `UserOperations` sent with the hooks will now be paid with the token configured above.

    <Warning>
      Be sure to use version **4.54.1** or later of the Account Kit SDK.
    </Warning>

    ## 3. Send a sponsored UserOperation

```tsx twoslash
import React from "react";
import {
  useSmartAccountClient,
  useSendUserOperation,
} from "@account-kit/react";
import { sepolia, getAlchemyPaymasterAddress } from "@account-kit/infra";
import { encodeFunctionData, parseAbi } from "viem";

export default function PayWithUsdcButton() {
  const { client, isLoadingClient } = useSmartAccountClient({});
  const erc20Abi = parseAbi([
    "function approve(address spender, uint256 amount) public returns (bool)",
  ]);
  const paymasterAddress = getAlchemyPaymasterAddress(sepolia, "0.7.0");

  return (
    <button
      onClick={() =>
        client!.sendUserOperation({
          uo: [
            {
              // approve call
              target: tokenAddress,
              data: encodeFunctionData({
                abi: erc20Abi,
                functionName: "approve",
                args: [paymasterAddress, maxTokenAmount],
              }) as `0x${string}`,
            },
            {
              target: "0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045", // TARGET_ADDRESS
              data: "0x",
              value: 0n,
            },
          ],
        })
      }
      disabled={isLoadingClient}
    >
      Send USDC-sponsored operation
    </button>
  );
}
```

<Tip>
  When performing ERC-20 sponsorship, be sure to use the `sendUserOperation`
  method on a client. Support for the `useSendUserOperation` hook is coming
  soon.
</Tip>

### 4 (Optional) Override on a single client

If you only want specific operations to use the policy, you can specify it on a dedicated client instead of setting it globally.

    ```tsx twoslash
    const { client } = useSmartAccountClient({
      policyId: "GAS_MANAGER_POLICY_ID",
      policyToken: {
        address: "0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238", // USDC_ADDRESS on sepolia (can be any ERC-20 token address enabled in your policy)
        maxTokenAmount: 10_000_000n, // Safety limit. If using USDC, this is 10 USDC (10 * 10^6).
      },
    });
    ```

Then use `client.sendUserOperation()` to send UserOperations.

  </Tab>
  <Tab title="React Native">
    ## 2. Set the Policy ID globally

    When creating your Account Kit config, you can optionally pass in a Gas Policy ID. This will enable all UOs sent by the `useSendUserOperation` hook to be sponsored by the policy you created.

    Copy it and then replace the `GAS_MANAGER_POLICY_ID` in the snippet below.

    <Tip>
      Remember to replace `ALCHEMY_API_KEY` with your Alchemy API key. If you don't
      have one yet, you can create an API key on the [Alchemy
      dashboard](https://dashboard.alchemy.com/signup/?a=aa-docs).
    </Tip>

    ```ts twoslash config.ts
    // @noErrors
    import { createConfig } from "@account-kit/react-native";
    import { sepolia } from "@account-kit/infra";

    export const config = createConfig({
      apiKey: "ALCHEMY_API_KEY",
      chain: sepolia,
      policyId: "GAS_MANAGER_POLICY_ID", // [!code ++]
    });
    ```

    Now you can follow the guide for [Sending user operations](/wallets/react-native/using-smart-accounts/send-user-operations) to send sponsored UOs from your smart account!

    ## 3. Set the gas policy ID per UserOperation

    If you want more control over which UOs are sponsored, then you can set the policy ID on a specific instance of the `Smart Account Client` returned by the `useSmartAccountClient()` hook.

    ```tsx twoslash
    import React from "react";
    import { View, Pressable, Text } from "react-native";
    import {
      useSmartAccountClient,
      useSendUserOperation,
    } from "@account-kit/react-native";

    export default function MyComponent() {
      const { client } = useSmartAccountClient({
        policyId: "GAS_MANAGER_POLICY_ID",
      });
      const { sendUserOperation } = useSendUserOperation({ client });

      return (
        <View>
          <Pressable
            onPress={() =>
              sendUserOperation({
                uo: {
                  target: "0xTARGET_ADDRESS",
                  data: "0x",
                  value: 0n,
                },
              })
            }
          >
            <View>
              <Text>Send Sponsored User Operation</Text>
            </View>
          </Pressable>
        </View>
      );
    }
    ```

  </Tab>
  <Tab title="Other Javascript">
    ## 2. Create a smart Account Client

    Now you can create a Smart Account Client which is configured to sponsor gas.

    ```tsx
    import {
      alchemy,
      createAlchemySmartAccountClient,
      sepolia,
    } from "@account-kit/infra";
    import { createLightAccount } from "@account-kit/smart-contracts";
    // You can replace this with any signer you'd like
    // We're using a LocalAccountSigner to generate a local key to sign with
    import { LocalAccountSigner } from "@aa-sdk/core";
    import { generatePrivateKey } from "viem/accounts";

    const alchemyTransport = alchemy({
      apiKey: "YOUR_API_KEY",
    });

    export const client = createAlchemySmartAccountClient({
      transport: alchemyTransport,
      policyId: "YOUR_POLICY_ID",
      policyToken: {
        address: tokenAddress,
        maxTokenAmount: 10_000_000n,
      },
      chain: sepolia,
      account: await createLightAccount({
        chain: sepolia,
        transport: alchemyTransport,
        signer: LocalAccountSigner.privateKeyToAccountSigner(generatePrivateKey()),
      }),
    });
    ```

    ## 3. Send a sponsored UserOperation

    ```tsx
    import { client } from "./client";
    import { encodeFunctionData, parseAbi } from "viem";

    const erc20Abi = parseAbi([
      "function approve(address spender, uint256 amount) public returns (bool)",
    ]);

    const { hash } = await client.sendUserOperation({
      uo: [
        {
          // approve call
          target: tokenAddress,
          data: encodeFunctionData({
            abi: erc20Abi,
            functionName: "approve",
            args: [paymasterAddress, maxTokenAmount],
          }) as `0x${string}`,
        },
        {
          // actual call
          target: "0xTARGET_ADDRESS",
          data: "0x",
          value: 0n,
        },
      ],
    });
    ```

    ## 4. Estimate ERC20 token amount of a UO

    <Markdown src="../../shared/estimate-gas-with-any-token.mdx" />

    ## 5. Simulate a ERC20 UO

    <Markdown src="../../shared/simulate-sponsor-with-any-token.mdx" />

  </Tab>
</Tabs>

## Done

Your dApp now sponsors gas with the chosen ERC-20 token!
