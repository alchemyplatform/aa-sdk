You will need to fill in values wrapped in curly braces like `{SIGNER_ADDRESS}`.

<Steps>

<Step title="Request an account">

```bash
curl -X POST https://api.g.alchemy.com/v2/{apiKey} \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": 1,
    "method": "wallet_requestAccount",
    "params": [
      {
        "signerAddress": "{SIGNER_ADDRESS}"
      }
    ]
  }'
```

This returns:

```bash
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": {
    "accountAddress": "ACCOUNT_ADDRESS",
    "id": "ACCOUNT_ID"
  }
}
```

For other potential responses, [check out the API reference!](https://www.alchemy.com/docs/wallets/api-reference/smart-wallets/wallet-api-endpoints/wallet-api-endpoints/wallet-request-account)

</Step>

<Step title="Request a swap quote">

```bash
curl -X POST https://api.g.alchemy.com/v2/{API_KEY} \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": 0,
    "method": "wallet_requestQuote_v0",
    "params": [
      {
        "from": "{ACCOUNT_ADDRESS_FROM_STEP_1}",
        "chainId": "{CHAIN_ID}",
        "fromToken": "{FROM_TOKEN}",
        "toToken": "{TO_TOKEN}",
        "fromAmount": "{FROM_AMOUNT_HEXADECIMAL}",
        "capabilities": {
          "paymasterService": {
            "policyId": "{PAYMASTER_POLICY_ID}"
          }
        }
      }
    ]
  }'
```

This returns:

```bash
{
  "jsonrpc": "2.0",
  "id": 0,
  "result": {
    "rawCalls": false,
    "chainId": "...",
    "quote": {
      "expiry": "EXPIRY",
      "minimumToAmount": "MINIMUM_TO_AMOUNT",
      "fromAmount": "FROM_AMOUNT"
    },
    "type": "user-operation-v070",
    "data": "USER_OPERATION_DATA",
    "signatureRequest": {
      "type": "personal_sign",
      "data": {
        "raw": "..."
      },
      "rawPayload": "..."
    },
    "feePayment": {
      "sponsored": true,
      "tokenAddress": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
      "maxAmount": "..."
    }
  }
}
```

Note the `signatureRequest`! This is what you now have to sign, and the returned `data` field is what we'll need when we're ready to send the transaction!

</Step>

<Step title="Sign the signature request">
    To sign the signature request, you should sign the `raw` field (note, this is not a string! You need to pass it to your signer as raw bytes, generally like so: `{ raw: "0x..." }`) with your signer of choice.
    
    This should use the `personal_sign` RPC method, as noted by the `type` in the `signatureRequest`.
    
    Alternatively, you can sign the raw payload with a simple `eth_sign` but this RPC method is not favored due to security concerns.

</Step>

<Step title="Send the prepared call">

```bash
curl -X POST https://api.g.alchemy.com/v2/{apiKey} \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "method": "wallet_sendPreparedCalls",
    "params": [
      {
        "type": "user-operation-v070",
        "data": "{DATA_FROM_STEP_2}",
        "chainId": "{CHAIN_ID}",
        "signature": {
          "type": "secp256k1",
          "data": "{SIGNATURE_FROM_STEP_3}"
        }
      }
    ],
    "id": 1
  }'
```

This returns:

```bash
{
  "jsonrpc": "2.0",
  "id": "1",
  "result": {
    "preparedCallIds": [
      "PREPARED_CALL_ID"
    ]
  }
}
```

Note the `PREPARED_CALL_ID`! We'll use this to track call status in the next step.

For other potential responses, [check out the API reference!](https://www.alchemy.com/docs/wallets/api-reference/smart-wallets/wallet-api-endpoints/wallet-api-endpoints/wallet-send-prepared-calls)

</Step>

<Step title="Track the prepared call">

You can use the `wallet_getCallsStatus` endpoint to check up on the transaction's status.

```bash
curl -X POST https://api.g.alchemy.com/v2/{apiKey} \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "method": "wallet_getCallsStatus",
    "params": [
      [
        "{PREPARED_CALL_ID_FROM_STEP_4}"
      ]
    ],
    "id": 1
  }'
```

This returns:

```bash
{
  "id": "1",
  "jsonrpc": "2.0",
  "result": {
    "id": "PREPARED_CALL_ID",
    "chainId": "CHAIN_ID",
    "atomic": true,
    "status": 200,
    "receipts": [...]
  }
}
```

Note that the status codes match the following:
| Code | Title |
|------|--------------------------|
| 100 | Pending |
| 200 | Confirmed |
| 400 | Offchain Failure |
| 500 | Onchain Failure |
| 600 | Partial Onchain Failure |

To get your transaction's mined transaction hash, you can access `result.receipts[0].transactionHash`.

For more details, check out [the API reference!](https://www.alchemy.com/docs/wallets/api-reference/smart-wallets/wallet-api-endpoints/wallet-api-endpoints/wallet-get-calls-status)

</Step>

</Steps>
