---
title: Batch User Operations
description: Learn how to send batched user operations using Smart Wallets across different frameworks.
slug: wallets/transactions/send/batch-user-operations
---

Batching user operations allows you to execute multiple transactions atomically in a single operation, which can save gas and improve user experience.

<Tabs>
  <Tab title="React">
    ## Batch user operation

    It's possible to send user operations in batch using the [`useSendUserOperation`](/wallets/reference/account-kit/react/hooks/useSendUserOperation) hook by passing an array of operations.

    <Tip>
      In the below example, we use `ModularAccountV2` as the underlying Smart Contract type, which is our default and recommended account. To learn more about all the account options, check out our guide [on choosing a smart account](/wallets/smart-contracts/choosing-a-smart-account).
    </Tip>

    ```tsx twoslash
    import React from "react";
    import {
      type UseSendUserOperationResult,
      useSendUserOperation,
      useSmartAccountClient,
    } from "@account-kit/react";

    export default function MyOpSenderComponent() {
      const { client } = useSmartAccountClient({});

      const { sendUserOperation, isSendingUserOperation } = useSendUserOperation({
        client,
        // optional parameter that will wait for the transaction to be mined before returning
        waitForTxn: true,
        onSuccess: ({ hash, request }) => {
          // [optional] Do something with the hash and request
        },
        onError: (error) => {
          // [optional] Do something with the error
        },
      });

      return (
        <div>
          <button
            onClick={() =>
              sendUserOperation({
                uo: [
                  {
                    target: "0xTARGET_ADDRESS",
                    data: "0x",
                    value: 0n,
                  },
                  {
                    target: "0xTARGET_ADDRESS",
                    data: "0x",
                    value: 0n,
                  },
                ],
              })
            }
            disabled={isSendingUserOperation}
          >
            {isSendingUserOperation ? "Sending..." : "Send Batch UO"}
          </button>
        </div>
      );
    }
    ```

  </Tab>
  <Tab title="React Native">
    ## Batch user operation

    To send multiple user operations in a single call, simply pass an array of user operations to the `sendUserOperation` method.

    <Tip>
      In the below example, we use `ModularAccountV2` as the underlying Smart
      Contract type. You can also use a different account type (see other options
      [here](/wallets/smart-contracts/other-accounts/modular-account)).
    </Tip>

    ```tsx twoslash batch-user-operation-component.tsx
    import React, { useState, useEffect } from "react";
    import { Alert, View, Button } from "react-native";
    import { User } from "@account-kit/signer";
    import {
      createModularAccountV2Client,
      ModularAccountV2,
    } from "@account-kit/smart-contracts";
    import {
      useSendUserOperation,
      useSmartAccountClient,
    } from "@account-kit/react-native";
    import { sepolia, alchemy } from "@account-kit/infra";
    import { SmartAccountClient } from "@aa-sdk/core";

    export default function MyOpSenderComponent() {
      const { client } = useSmartAccountClient({});

      const { sendUserOperation, isSendingUserOperation } = useSendUserOperation({
        client,
        waitForTxn: true,
        onSuccess: ({ hash, request }) => {
          // [optional] Do something with the hash and request
        },
        onError: (error) => {
          // [optional] Do something with the error
        },
      });

      const handleSendBatchUserOperations = () => {
        sendUserOperation({
          uo: [
            {
              target: "0xTARGET_ADDRESS",
              data: "0x",
              value: 0n,
            },
            {
              target: "0xTARGET_ADDRESS",
              data: "0x",
              value: 0n,
            },
          ],
        });
      };

      return (
        <View>
          <Button
            onPress={handleSendBatchUserOperations}
            disabled={isSendingUserOperation}
            title={isSendingUserOperation ? "Sending..." : "Send Batch UO"}
          />
        </View>
      );
    }
    ```

  </Tab>
  <Tab title="Other JS">
    ## Batch user operation

    It's possible to send user operations in batch using the same approach as single operations, just pass an array instead!

    <Tip>
      In the below example, we use `LightAccount` as the underlying Smart Contract type. You can also use `MultiOwnerModularAccount` if you want to provide your users with an ERC-6900 compliant modular account, or you can use `MultiOwnerLightAccount` if you want to support an account with multiple owners.
    </Tip>

    ```ts twoslash
    import { watchSmartAccountClient } from "@account-kit/core";
    import { config } from "./config.js";

    // How you actually store this state variable
    // depends on the framework you're using
    let clientState;

    // The watch smart account client will handle all of the possible state changes
    // that can impact this client:
    //  - Signer status
    //  - Account instantiation
    //  - Chain changes
    const clientSubscription = watchSmartAccountClient(
      {
        type: "LightAccount",
      },
      config,
    )((clientState_) => {
      clientState = clientState_;
    });

    if (clientState == null || clientState.isLoadingClient) {
      console.log("Loading...");
    }

    const client = clientState.client;

    await client.sendUserOperation({
      uo: [
        {
          target: "0xtarget",
          data: "0x",
          value: 0n,
        },
        {
          target: "0xtarget",
          data: "0x",
          value: 0n,
        },
      ],
    });
    ```

  </Tab>
  <Tab title="APIs">
    Itâ€™s easy to send calls in batch from a single account! Simply include an array of calls when calling `wallet_sendPreparedCalls`. The calls will be batched into a single atomic user operation.

    <Tip>
    If you are unfamiliar with sending a single user operation call using Wallet APIs, check out [this guide](/wallets/transactions/send/send-user-operations) first to learn how to request a smart account and sign calls.
    </Tip>

    ```bash
    curl --request POST \
        --url https://api.g.alchemy.com/v2/API_KEY \
        --header 'accept: application/json' \
        --header 'content-type: application/json' \
        --data '
    {
        "id": 1,
        "jsonrpc": "2.0",
        "method": "wallet_prepareCalls",
        "params": [
            {
                "calls": [
                    {
                        "to": "0xTARGET_ADDRESS",
                        "data": "0x",
                        "value": "0x00"
                    },
                    {
                        "to": "0xTARGET_ADDRESS"
                        "data": "0x",
                        "value": "0x00"
                    }
                ],
                "from": "0xACCOUNT_ADDRESS",
                "chainId": "0xCHAIN_ID"
            }
        ]
    }
    '
    ```

  </Tab>
</Tabs>
