---
title: Send EVM User Operations
description: Learn how to send user operations using Smart Wallets across different frameworks.
slug: wallets/transactions/send/send-user-operations
---

Once your users have been authenticated, you can start sending user operations! Smart Wallets makes it easy to send user operations across different frameworks.

<Tabs>
  <Tab title="React">
    ## Overview

    Sending user operations is really easy with React hooks. Use the [`useSendUserOperation`](/wallets/reference/account-kit/react/hooks/useSendUserOperation) hook to send transactions.

    If you want to sponsor the gas for a user, see our [guide](/wallets/transactions/sponsor-gas/sponsor-gas-evm).

    ## Single user operation

    <Tip>
      In the below example, we use `ModularAccountV2` as the underlying Smart Contract type, which is our default and recommended account. To learn more about all the account options, check out our guide [on choosing a smart account](/wallets/smart-contracts/choosing-a-smart-account).
    </Tip>

    ```tsx twoslash
    import React from "react";
    import {
      type UseSendUserOperationResult,
      useSendUserOperation,
      useSmartAccountClient,
    } from "@account-kit/react";

    export default function MyOpSenderComponent() {
      const { client } = useSmartAccountClient({});

      const { sendUserOperation, isSendingUserOperation } = useSendUserOperation({
        client,
        // optional parameter that will wait for the transaction to be mined before returning
        waitForTxn: true,
        onSuccess: ({ hash, request }) => {
          // [optional] Do something with the hash and request
        },
        onError: (error) => {
          // [optional] Do something with the error
        },
      });

      return (
        <div>
          <button
            onClick={() =>
              sendUserOperation({
                uo: {
                  target: "0xTARGET_ADDRESS",
                  data: "0x",
                  value: 0n,
                },
              })
            }
            disabled={isSendingUserOperation}
          >
            {isSendingUserOperation ? "Sending..." : "Send UO"}
          </button>
        </div>
      );
    }
    ```

  </Tab>
  <Tab title="React Native">
    Sending user operations is pretty straightforward. All you have to do is use the `useSendUserOperation()` hook from the `@account-kit/react-native` package.

    If you want to sponsor the gas for a user, see our [guide](/wallets/react-native/using-smart-accounts/sponsor-gas).

    ## Single user operation

    <Tip>
      In the below example, we use `ModularAccountV2` as the underlying Smart
      Contract type. You can also use a different account type (see other options
      [here](/wallets/smart-contracts/other-accounts/modular-account)).
    </Tip>

    ```tsx twoslash send-user-operation.tsx
    import React, { useState, useEffect } from "react";
    import { Alert, View, Button } from "react-native";
    import { User } from "@account-kit/signer";
    import {
      createModularAccountV2Client,
      ModularAccountV2,
    } from "@account-kit/smart-contracts";
    import {
      useSendUserOperation,
      useSmartAccountClient,
    } from "@account-kit/react-native";
    import { sepolia, alchemy } from "@account-kit/infra";
    import { SmartAccountClient } from "@aa-sdk/core";

    export default function MyOpSenderComponent() {
      const { client } = useSmartAccountClient({});

      const { sendUserOperation, isSendingUserOperation } = useSendUserOperation({
        client,
        waitForTxn: true,
        onSuccess: ({ hash, request }) => {
          // [optional] Do something with the hash and request
        },
        onError: (error) => {
          // [optional] Do something with the error
        },
      });

      const handleSendUserOperation = () => {
        sendUserOperation({
          uo: {
            target: "0xTARGET_ADDRESS",
            data: "0x",
            value: 0n,
          },
        });
      };

      return (
        <View>
          <Button
            onPress={handleSendUserOperation}
            disabled={isSendingUserOperation}
            title={isSendingUserOperation ? "Sending..." : "Send UO"}
          />
        </View>
      );
    }
    ```

  </Tab>
  <Tab title="Other JS">
    ## Other JS Frameworks

    Once your users have been [authenticated](/wallets/core/authenticate-users), you can start sending user operations!

    ## Single user operation

    <Tip>
      In the below example, we use `LightAccount` as the underlying Smart Contract type. You can also use `MultiOwnerModularAccount` if you want to provide your users with an ERC-6900 compliant modular account, or you can use `MultiOwnerLightAccount` if you want to support an account with multiple owners.
    </Tip>

    ```ts twoslash
    import { watchSmartAccountClient } from "@account-kit/core";
    import { config } from "./config.js";

    // How you actually store this state variable
    // depends on the framework you're using
    let clientState;

    // The watch smart account client will handle all of the possible state changes
    // that can impact this client:
    //  - Signer status
    //  - Account instantiation
    //  - Chain changes
    const clientSubscription = watchSmartAccountClient(
      {
        type: "LightAccount",
      },
      config,
    )((clientState_) => {
      clientState = clientState_;
    });

    if (clientState == null || clientState.isLoadingClient) {
      console.log("Loading...");
    }

    const client = clientState.client;

    await client.sendUserOperation({
      uo: {
        target: "0xtarget",
        data: "0x",
        value: 0n,
      },
    });
    ```

  </Tab>
  <Tab title="APIs">
    Learn how to send user operations via Wallet APIs.

    ### 1. Request a Smart Account

    Given an owner address, call **`wallet_requestAccount`** to request the smart account address for that owner. The [owner](/docs/wallets/concepts/smart-account-signer) address can be any signer (or public key) that has the ability to sign transactions.

    - If you want to use social sign up / log in, you can simply use the [SDK](/docs/wallets/react/getting-started) to authenticate user’s and retrieve their signer address.
    - If instead, you want to generate and control wallets with a custodial owner, you can generate any public private key pair (e.g. any EOA).

    ```bash
    curl --request POST \
        --url https://api.g.alchemy.com/v2/API_KEY \
        --header 'accept: application/json' \
        --header 'content-type: application/json' \
        --data '
    {
        "id": 1,
        "jsonrpc": "2.0",
        "method": "wallet_requestAccount",
        "params": [
            {
                "signerAddress": "0xOWNER_ADDRESS"
            }
        ]
    }
    '
    ```

    This will return the smart account address associated with the given signer:

    ```json
    {
      "jsonrpc": "2.0",
      "id": 1,
      "result": {
        "accountAddress": "0xACCOUNT_ADDRESS",
        "id": "abcde..."
      }
    }
    ```

    <Tip>

    In the above example, we use **`ModularAccountV2`** as the underlying Smart Account type, which is our default and recommended account. To learn more about all the account options, check out our guide [**on choosing a smart account**](https://alchemy-preview-3ad32993-1ade-4b5f-9a16-88995deef539.docs.buildwithfern.com/docs/wallets/smart-contracts/choosing-a-smart-account).

    </Tip>

    ### 2. Prepare

    Now that we have an account, it’s time to prepare some calls! Be sure to include the call data (`to` address, `data`, and `value`), `from` address, and `chainId`.

    ```bash
    curl --request POST \
        --url https://api.g.alchemy.com/v2/API_KEY \
        --header 'accept: application/json' \
        --header 'content-type: application/json' \
        --data '
    {
        "id": 1,
        "jsonrpc": "2.0",
        "method": "wallet_prepareCalls",
        "params": [
            {
                "calls": [
                    {
                        "to": "0xTARGET_ADDRESS",
                        "data": "0x",
                        "value": "0x00"
                    }
                ],
                "from": "0xACCOUNT_ADDRESS",
                "chainId": "0xCHAIN_ID" // e.g. "0x66eee" for Arbitrum Sepolia
            }
        ]
    }
    '
    ```

    This will return the user operation struct (the **`data`** field) and a signature request, for example:

    ```json
    {
        "type": "user-operation-v070",
        "data": {...userOpStruct},
        "chainId": "0xCHAIN_ID",
        "signatureRequest": {
            "type": "personal_sign",
            "data": {
                "raw": "0xHASH_TO_SIGN",
            },
            "rawPayload": "0xRAW_PAYLOAD_TO_SIGN"
        }
    }
    ```

    ### 3. Sign the userOp

    Once you have the above response, all you have to do is sign the signature request using the account owner (which you provided in Step 1).

    If using an Alchemy Signer, you can learn how to stamp the request on the frontend [**here**](https://www.alchemy.com/docs/reference/how-to-stamp-requests). When using the Alchemy Signer, it’s easiest to sign the **`signatureRequest.rawPayload`** directly.

    If you are using a library such as Viem that supports the **`personal_sign`** method, you should use that to sign the `signatureRequest.data` field.

    ### 4. Send the Prepared Calls!

    By combing the `userOpStruct` from Step 2 with the signature from Step 3, you’re ready to send the call!

    ```bash
    curl --request POST \
        --url https://api.g.alchemy.com/v2/API_KEY \
        --header 'accept: application/json' \
        --header 'content-type: application/json' \
        --data '
    {
        "id": 1,
        "jsonrpc": "2.0",
        "method": "wallet_sendPreparedCalls",
        "params": [
            {
                "type": "user-operation-v070",
                "data": {...userOpStruct}, // the data returned in Step 2
                "chainId": "0xCHAIN_ID",
                "signature": {
                    "type": "secp256k1",
                    "data": "0xUSEROP_SIGNATURE" // your signature from Step 3
                }
            }
        ]
    }
    '
    ```

  </Tab>
</Tabs>
