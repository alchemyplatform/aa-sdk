---
title: Swaps (Alpha)
slug: wallets/transactions/swap-tokens
---

Swap any token across networks. Integrate in minutes. Built natively into Smart Wallets.
- 1-click Swap + Action (ex: send, deposit, borrow, pay)
- Gasless swaps
- [Coming soon] Cross-chain swaps

<Tip>
    The Swaps API is in early access. The service is production ready, however there may be changes in the future to simplify the endpoint. We will let you know if/when that happens.

    [Request early access!](https://alchemyapi.typeform.com/to/pkjSr57v)

</Tip>

# The Swap flow

## **Flow**

1. Request a swap quote
2. Sign the prepared calls (swap + post swap action)
3. Send prepared calls (swap + post swap action)
4. Poll for confirmation

## **Swap options**

```tsx
// Mode 1: Swap exact input amount
{
  fromAmount: "0x2710";
} // Swap exactly 0.01 USDC (10000 in hex, 6 decimals)

// Mode 2: Get minimum output amount
{
  minimumToAmount: "0x5AF3107A4000";
} // Get at least 0.0001 ETH (18 decimals). We calculate how much USDC you need to spend to get at least your desired ETH amount!
```

## Prerequisites

Before you begin, ensure you have:

- An [Alchemy API Key](https://dashboard.alchemy.com/apps)
- A [Gas Manager](https://dashboard.alchemy.com/gas-manager/policy/create) policy
- A small amount of USDC for testing (~$1 worth is enough!)
  - **Important**: You'll need to send these tokens to your smart wallet address in Step 3 of the Implementation!
- A signer to own the account and sign messages

<Tabs>
  <Tab title="React"></Tab>
  <Tab title="Other JS"></Tab>
  <Tab title="APIs">
  You will need to fill in values wrapped in curly braces like `{SIGNER_ADDRESS}`.
  
  ### Step 1: Request an account
  
  ```bash
  curl -X POST https://api.g.alchemy.com/v2/{apiKey} \
    -H "Content-Type: application/json" \
    -d '{
      "jsonrpc": "2.0",
      "id": 1,
      "method": "wallet_requestAccount",
      "params": [
        {
          "signerAddress": "{SIGNER_ADDRESS}"
        }
      ]
    }'
  ```
  
  This returns:
  ```bash
  {
    "jsonrpc": "2.0",
    "id": 1,
    "result": {
      "accountAddress": "ACCOUNT_ADDRESS",
      "id": "ACCOUNT_ID"
    }
  }
  ```
  
  For other potential responses, [check out the API reference!](https://www.alchemy.com/docs/wallets/api-reference/smart-wallets/wallet-api-endpoints/wallet-api-endpoints/wallet-request-account)
  
  ### Step 2: Request a swap quote

```bash
curl -X POST https://api.g.alchemy.com/v2/{API_KEY} \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": 0,
    "method": "wallet_requestQuote_v0",
    "params": [
      {
        "from": "{ACCOUNT_ADDRESS_FROM_STEP_1}",
        "chainId": "{CHAIN_ID}",
        "fromToken": "{FROM_TOKEN}",
        "toToken": "{TO_TOKEN}",
        "fromAmount": "{FROM_AMOUNT_HEXADECIMAL}",
        "capabilities": {
          "paymasterService": {
            "policyId": "{PAYMASTER_POLICY_ID}"
          }
        }
      }
    ]
  }'
```

This returns:

```bash
{
  "jsonrpc": "2.0",
  "id": 0,
  "result": {
    "rawCalls": false,
    "chainId": "...",
    "quote": {
      "expiry": "0x68ba1068",
      "minimumToAmount": "0x23b9a56468911a",
      "fromAmount": "0x2710"
    },
    "type": "user-operation-v070",
    "data": "USER_OPERATION_DATA",
    "signatureRequest": {
      "type": "personal_sign",
      "data": {
        "raw": "..."
      },
      "rawPayload": "..."
    },
    "feePayment": {
      "sponsored": true,
      "tokenAddress": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
      "maxAmount": "..."
    }
  }
}
```

Note the `signatureRequest`! This is what you now have to sign, and the returned `data` field is what we'll need when we're ready to send the transaction!

### Step 3: Sign the signature request

To sign the signature request, you should sign the `raw` field (note, this is not a string! You need to pass it to your signer as raw bytes, generally like so: `{ raw: "0x..." }`) with your signer of choice.

This should use the `personal_sign` RPC method, as noted by the `type` in the `signatureRequest`.

Alternatively, you can sign the raw payload with a simple `eth_sign` but this RPC method is not favored due to security concerns.

### Step 4: Send the prepared call

```bash
curl -X POST https://api.g.alchemy.com/v2/{apiKey} \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "method": "wallet_sendPreparedCalls",
    "params": [
      {
        "type": "user-operation-v070",
        "data": "{DATA_FROM_STEP_2}",
        "chainId": "{CHAIN_ID}",
        "signature": {
          "type": "secp256k1",
          "data": "{SIGNATURE_FROM_STEP_3}"
        }
      }
    ],
    "id": 1
  }'
```

This returns:

```bash
{
  "jsonrpc": "2.0",
  "id": "1",
  "result": {
    "preparedCallIds": [
      "PREPARED_CALL_ID"
    ]
  }
}
```

Note the `PREPARED_CALL_ID`! We'll use this to track call status in the next step.

For other potential responses, [check out the API reference!](https://www.alchemy.com/docs/wallets/api-reference/smart-wallets/wallet-api-endpoints/wallet-api-endpoints/wallet-send-prepared-calls)

### Step 5: Track the prepared call

You can use the `wallet_getCallsStatus` endpoint to check up on the transaction's status.

```bash
curl -X POST https://api.g.alchemy.com/v2/{apiKey} \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "method": "wallet_getCallsStatus",
    "params": [
      [
        "{PREPARED_CALL_ID_FROM_STEP_4}"
      ]
    ],
    "id": 1
  }'
```

This returns:

```bash
{
  "id": "1",
  "jsonrpc": "2.0",
  "result": {
    "id": "PREPARED_CALL_ID",
    "chainId": "CHAIN_ID",
    "atomic": true,
    "status": 200,
    "receipts": [...]
  }
}
```

Note that the status codes match the following:
| Code | Title |
|------|--------------------------|
| 100 | Pending |
| 200 | Confirmed |
| 400 | Offchain Failure |
| 500 | Onchain Failure |
| 600 | Partial Onchain Failure |

To get your transaction's mined transaction hash, you can access `result.receipts[0].transactionHash`.

For more details, check out [the API reference!](https://www.alchemy.com/docs/wallets/api-reference/smart-wallets/wallet-api-endpoints/wallet-api-endpoints/wallet-get-calls-status)
  </Tab>
</Tabs>

# FAQs

## What chains are supported?

Chains supported (for now) are: Ethereum, Arbitrum, Base, Berachain, BSC/BNB, Ink, Monad, Optimism, Polygon, Unichain and World Chain mainnets.

## Does the Swap API support cross-chain swaps?

Currently, the Swap API supports only single-chain swaps. Cross-chain swaps are coming soon!

## How do you encode values?

Values are simply passed as hexadecimal strings. The Swap API doesn't add complexity to consider decimals, so 0x01 is always the smallest amount of a given asset.
1 ETH, or DAI (18 decimals) is `0xDE0B6B3A7640000`
1 USDC (6 decimals) is `0xF4240`
This removes any ambiguity— if it’s numerical, it’s a hex.

## What is the expiry?

The expiry is an informational indicator of when you can expect to be able to process the swap request. If you’re at/near the expiry, it might be a good time to request a new quote.

## What if I’m using React?

Use the `@account-kit/react` package to access a `smartWalletClient`. This package automatically uses the Signer for user authentication & signing. [Check out the docs for getting started with React to learn more](/wallets/react/quickstart).
