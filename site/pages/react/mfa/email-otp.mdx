---
title: Setting Up Multi-Factor Authentication
description: How to set up TOTP-based multi-factor authentication in your React app
---

# Setting Up Multi-Factor Authentication

This guide shows you how to implement Time-based One-Time Password (TOTP) multi-factor authentication in your React application using Account Kit hooks.

:::tip
Multi-Factor Authentication is currently only supported when authenticating with Email OTP or Email Magic Link.
:::

## Overview

Multi-factor authentication adds an extra layer of security by requiring users to verify their identity using multiple methods. Account Kit supports TOTP-based MFA, which works with authenticator apps like Google Authenticator, Authy, or Microsoft Authenticator.

## Implementation

To implement MFA in your React application, you'll use the `useMFA` hook from Account Kit.

### Step 1: Add a TOTP Factor

First, add a new TOTP factor to the user's account:

```tsx
import { useMFA } from "@account-kit/react";

// Inside your component
const { addMFA } = useMFA();

const handleAddMFA = async () => {
  try {
    const result = await addMFA({
      multiFactorType: "totp",
    });
    
    // Display the QR code or secret to the user
    const totpUrl = result.multiFactors[0].multiFactorTotpUrl;
    const multiFactorId = result.multiFactors[0].multiFactorId;
    
    // Store multiFactorId for verification step
  } catch (error) {
    // Handle error
  }
};
```

### Step 2: Verify the TOTP Setup

After the user scans the QR code with their authenticator app, they need to verify the setup:

```tsx
import { useMFA } from "@account-kit/react";

// Inside your component
const { verifyMFA } = useMFA();

const handleVerifyMFA = async (code: string, multiFactorId: string) => {
  try {
    await verifyMFA({
      multiFactorId,
      multiFactorCode: code, // 6-digit code from authenticator app
    });
    
    // MFA setup successful
  } catch (error) {
    // Handle error
  }
};
```

### Step 3: Managing MFA Factors

You can retrieve and remove MFA factors:

```tsx
import { useMFA } from "@account-kit/react";

// Inside your component
const { getMFAFactors, removeMFA } = useMFA();

// Get all MFA factors
const fetchFactors = async () => {
  try {
    const result = await getMFAFactors();
    const factors = result.multiFactors;
    // Display factors to user
  } catch (error) {
    // Handle error
  }
};

// Remove an MFA factor
const handleRemoveFactor = async (multiFactorId: string) => {
  try {
    await removeMFA({
      multiFactorIds: [multiFactorId],
    });
    // Factor removed successfully
  } catch (error) {
    // Handle error
  }
};
```

## Checking MFA Availability

Before attempting to set up MFA, check if it's available for the current user:

```tsx
import { useMFA } from "@account-kit/react";

// Inside your component
const { isMfaAvailable } = useMFA();

// Only show MFA setup options if available
if (isMfaAvailable) {
  // Render MFA setup UI
} else {
  // User needs to authenticate first
}
```

## Next Steps

After setting up MFA, users will need to provide both their primary authentication factor and the TOTP code when signing in:

- [Email OTP with MFA](/react/mfa/email-otp)
- [Email Magic Link with MFA](/react/mfa/email-magic-link)